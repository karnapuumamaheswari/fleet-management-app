<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin dashboard</title>
    <style>
        body{
            text-align: center;
            font-family: Arial, Helvetica, sans-serif;
            background-color: aqua;

        }
        .card{
            border: 1px solid black;
            width: 200ox;
            padding: 10px;
            margin : 10px;
            display: inline-block;
            border-radius: 8px;
        }
        nav{
            background-color: antiquewhite;
            padding:10px;
        }
        nav select,nav button{
            margin-right: 10px;
        }
        .layout{
            display : flex;
        }
        #main{
            flex:1;
            padding :15px;
        }
        .card{
            border: 1px solid #999;
            border-radius: 6px;
            padding: 10px;
            margin:10px;
            width: 250px;
            box-sizing: border-box;
        }
        #sidebar{
            width : 260px;
            padding : 15px;
            border-right:  1px solid #ccc;
        }
        button{
            cursor: pointer;
        }
    </style>
</head>
<body>
    <nav>
    <h2>Admin Dashboard</h2>
    Category:
    <select id = "filtercat" onchange="showData()">
        <option value = "">All Category</option>
        <option value = "Auto">Auto</option>
        <option value = "Car">Car</option>
        <option value = "Truck">Truck</option>
        <option value = "Bus">Bus</option>
    </select>
    Availability:
    <select id = "filtersta" onabort="showData()">
        <option value="">All Category</option>
        <option value = "Available">Available</option>
        <option value = "Unavailable">Unavailable</option>
    </select>
    <button onclick="clearFilters()">Clear Filter
    </button>
    </nav>
    <hr>

    <div class = "layout">
        <aside id = "sidebar">
        <h3>Fleet Form</h3>
        <form id = "fleetForm">
        <input type = "text" id = "regno" placeholder="RegNo"><br><br>
    <select id = "category">
        <option value="">Category</option>
        <option value = "Auto">Auto</option>
        <option value = "Car">Car</option>
        <option value = "Truck">Truck</option>
        <option value = "Bus">Bus</option>
    </select><br><br>

    <input type="text" id = "driver" placeholder="Driver Name"><br><br>
    <label><input type = "checkbox" id = "status">Available</label><br><br>

    <button type = "submit" onclick="addFleet()">Add Fleet
    </button>
    </form>
    </aside>

    <section id = main>
        <h3>Fleet cards</h3>
        <div id = "cards" class = "card-wrap"></div>
    </section>
    </div>
    <script>
        let arr = [];

        function addFleet(){
            let reg = document.getElementById("regno").value.trim();
            let cat = document.getElementById("category").value;
            let dr = document.getElementById("driver").value.trim();
            let st = document.getElementById("status").checked?"Aavailable":"Unavailable";
            if(reg ==="" ||cat === "" || dr === "" ){
                alert("Fill all fields");
                return;
            }
            arr.push({
                reg,
                cat,
                dr,
                st
            });

            regno.value = "";
            category.value= "";
            driver.value = "";
            status.checked = false;
            showData();
        }

        function showData(){
            let box = document.getElementById("show");
            let fcat = filterCat.value;
            let fsta = filterSta.value;
            box.innerHTML = "";

            arr.filter(v => (fcat === "" || v.cat ===fcat) && (fsta === "" || v.st === fsta)).forEach((v,i) =>{
                let card = document.createElement("div");
                card.className= "card";
                card.innerHTML = `
                    <p><b> Reg:</b>${v.reg}</p>
                    <p><b> Cat:</b>${v.cat}</p>
                    <p><b> Driver:</b>${v.dr}</p>
                    <p><b> status:</b>${v.st}</p>
                    <button onclick = "updateDriver(${i})">Update Driver</button>
                    <button onclick= "changeStatus(${i})"> Availability</button>
                    <button onclick = "deleteFleet(${i})">Delete</button>`;
                    box.appendChild(card);
            });
            
        }

        function updateDriver(i){
            let name = prompt("Enter new driver name: ");
            if(name){
                arr[i].dr = name;
                showData();
            }
        }

        function changeStatus(i){
            arr[i].st = arr[i].st == "Available"?"Unavailable":"Available";
            showData();        }

        function deleteFleet(i){
            arr.splice(i,1);
            showData();
        }

        function clearFilters(){
            filterCat.value = "";
            filterSta.value = "";
            showData();
        }
    </script>
</body>
</html>